# Vision

Документ фиксирует техническое видение MVP цифрового агрегатора по уборке городских улиц (KISS, без оверинжиниринга).

## 1. Технологии
- Формат: веб‑приложение (адаптивный веб‑интерфейс) + серверное API.
- Язык/платформа: Python.
- Бэкенд: минимальный веб‑фреймворк на Python (предлагаю FastAPI для скорости разработки и простых API).
- Фронтенд: простые серверные шаблоны или минимальный клиентский UI (предлагаю Jinja2 + лёгкий CSS‑фреймворк).
- База данных: SQLite.
- Оплаты в MVP: заглушка/ручная фиксация оплаты.

## 2. Принципы разработки
- Один сервис, одна код‑база.
- Сначала рабочие сценарии, потом улучшения.
- Минимум внешних зависимостей.
- Простые роли и права (2–3 роли максимум).
- Без микросервисов, брокеров и сложных очередей.

## 3. Структура проекта
- `app/` — код приложения
  - `main.py` — вход
  - `db.py` — подключение SQLite
  - `models.py` — модели
  - `schemas.py` — схемы
  - `routes/` — API/страницы
- `templates/` — HTML
- `static/` — CSS/иконки
- `data/` — файл БД SQLite
- `tests/` — минимальные тесты
- `README.md` — запуск
- `requirements.txt`

## 4. Архитектура проекта
- Монолитное приложение.
- 3 слоя: UI (шаблоны) → логика/сервисы → БД (SQLite).
- Роли: Заказчик, Исполнитель, Администратор.
- Коммуникация: HTTP внутри одного сервиса.
- Асинхрон/очереди: нет.

## 5. Модель данных
- `User`: id, имя, роль, телефон/email.
- `Order`: id, заказчик, адрес, описание, дата/время, статус, цена.
- `Assignment`: id, заказ, исполнитель, статус выполнения.
- `Payment`: id, заказ, сумма, статус (заглушка).
- Статусы (минимально):
  - Order: `new`, `in_progress`, `done`, `cancelled`.
  - Assignment: `assigned`, `accepted`, `completed`.

## 6. Сценарии работы
- Заказчик: регистрация → создание заказа → просмотр статуса.
- Исполнитель: регистрация → просмотр доступных заказов → взятие заказа → отметка выполнения.
- Администратор: просмотр всех заказов → изменение статуса.
- Оплата: фиксируется вручную администратором.

## 7. Деплой
- Репозиторий хранится на GitHub.
- Запуск вручную на сервере/локально через `uvicorn`.
- База SQLite хранится в `data/`.

## 8. Подход к конфигурированию
- Настройки в `.env`.
- Используем переменные окружения (например: `APP_ENV`, `DATABASE_URL`, `SECRET_KEY`).
- В репозитории хранится `.env.example`, реальный `.env` не коммитится.

## 9. Подход к логгированию
- Стандартный `logging` Python.
- Уровень по умолчанию: INFO.
- Логи в консоль (stdout), без файлов.
- Ошибки логируются с stack trace.
